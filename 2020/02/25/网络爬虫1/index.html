<!DOCTYPE html>
<html lang="zh-CN">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="description" content="">
  <meta name="author" content="Hardy">
  <meta name="keywords" content="">
  <title>网络爬虫1 ~ To be is to do!</title>

  <link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"  >
<link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css"  >
<link rel="stylesheet" href="/lib/mdbootstrap/css/mdb.min.css"  >
<link rel="stylesheet" href="/lib/github-markdown/github-markdown.min.css"  >

<link rel="stylesheet" href="//at.alicdn.com/t/font_1067060_qzomjdt8bmp.css">



  <link rel="stylesheet" href="/lib/prettify/tomorrow-night-eighties.min.css"  >

<link rel="stylesheet" href="/css/main.css"  >


  <link rel="stylesheet" href="/lib/fancybox/jquery.fancybox.min.css"  >


<meta name="generator" content="Hexo 4.2.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>To be is to do!</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">首页</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/archives/">归档</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/categories/">分类</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">标签</a>
          </li>
        
          
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">关于</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background"
         style="background: url('/img/default.png')no-repeat center center;
           background-size: cover;
           background-attachment: fixed;">
      <div class="full-bg-img">
        <div class="mask rgba-black-light flex-center">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              <br>
              
                <p class="mt-3">
                  <i class="fas fa-calendar-alt" aria-hidden="true"></i>&nbsp;
                  星期二, 二月 25日 2020, 10:39 上午
                </p>
              

              <p>
                
                  
                  &nbsp;<i class="far fa-chart-bar"></i>
                  <span class="post-count">
                    2k 字
                  </span>&nbsp;
                

                
                  
                  &nbsp;<i class="far fa-clock"></i>
                  <span class="post-count">
                      7 分钟
                  </span>&nbsp;
                

                
                  <!-- 不蒜子统计文章PV -->
                  
                  &nbsp;<i class="far fa-eye" aria-hidden="true"></i>&nbsp;
                  <span id="busuanzi_container_page_pv">
                    <span id="busuanzi_value_page_pv"></span> 次
                  </span>&nbsp;
                
              </p>
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="py-5 z-depth-3" id="board">
        <div class="post-content mx-auto" id="post">
          <div class="markdown-body">
            <h1 id="网络爬虫"><a href="#网络爬虫" class="headerlink" title="网络爬虫"></a>网络爬虫</h1><p>这一部分的内容是，从网络上爬取数据。<br>本部分内容将分为5部分：网络爬虫的基础知识，网络请求，数据解析，数据存储与展示以及Scrapy。其中，最重要的是Scrapy，其满足了现在爬虫的要求。<br>整个部分的知识模块如下：<br><img src="/images/spider1.png" srcset="/img/loading.gif" alt="" title="spider"> </p>
<h1 id="第一部分：网络爬虫的基础知识"><a href="#第一部分：网络爬虫的基础知识" class="headerlink" title="第一部分：网络爬虫的基础知识"></a>第一部分：网络爬虫的基础知识</h1><p>本部分将由3板块构成，结构如下：<br><img src="/images/spider2.png" srcset="/img/loading.gif" alt="" title="basic knowledge"><br>这三部分分别是：网页的基本组成，http协议以及爬虫的相关概念。</p>
<h2 id="Part-1：网页的基本组成"><a href="#Part-1：网页的基本组成" class="headerlink" title="Part 1：网页的基本组成"></a>Part 1：网页的基本组成</h2><p>这部分将对网页的基础知识进行补充，以便于后续的网页数据的提取。   </p>
<p>1.1 网页的基本结构<br>首先给出一个网页的基本形式，如下图：<br><img src="/images/spider3.PNG" srcset="/img/loading.gif" alt="" title="example of html"><br>完整HTML包括html DOCTYPE声明、title标题、head、网页编码声明等内容。<br>a. html DOCTYPE声明<br>DOCTYPE是document type(文档类型)的简写，用来说明你用的XHTML或者HTML是什么版本，是标准化网页内容所需要的。所给示例的图片中，&lt;!DOCTYPE html&gt;就是html DOCTYPE声明。<br>b. head<br><code>&lt;head&gt;&lt;/head&gt;</code>标签用于标识HTML的头部区域，<head>和<meta name="generator" content="Hexo 4.2.0"></head>之间的内容都属于头部区域中的内容，主要包括一些网页相关的信息，如网页标题、字符集、网页描述等信息，还可以包括script代码等。示例中，head包含了meta, title等内容。<br>c. title<br>title显示的是网页打开之后，页标签的显示内容。例如：<br><img src="/images/spider4.jpg" srcset="/img/loading.gif" alt="" title="title of html"><br>d. meta<br><code>&lt;meta&gt;</code>标签用来定义文档的元数据，使用“名称=值”的形式。一般使用它来描述当前页面的特性。提供有关页面的元信息，页面编码、刷新跳转、描述、更新频度等内容。示例中，meta描述了name和content的两组实例。<br>e. body<br><code>&lt;body&gt;&lt;/body&gt;</code>是放置页面内容的地方，所有需要在浏览器窗口中显示的内容都需要放置在<body></body>标签对之间。<br>f. html<br><code>&lt;html&gt;&lt;/html&gt;</code>标签是HTML页面中所有标签的顶层标签，一个页面有且只有一对该标签，页面中的所有标签和内容都必须放在<html></html>标签对之间。</p>
<p>1.2 标签的标准格式<br>不同的加载内容，有不同的标准格式。<br>a. 注释<br>形式：<code>&lt;!--string--&gt;</code>其中，string是注释的内容；<br>b. Meta<br>例如，示例中的<code>&lt;meta charset=&quot;UTF-8&quot;&gt;</code>表示使用的编码方式是utf-8.<br>meta的内容都是放在与<code>&lt;meta &gt;</code>中的。<br>c. body, html, head, title等<br>这些标签的形式都是<code>&lt;body&gt;</code>表示开始，<code>&lt;/body&gt;</code>表示结束。它们中间的部分就表示这个模块的内容。<br>d. div标签<br>div定义文档中的分区或节，采用的格式也是<code>&lt;div&gt; &lt;/div&gt;</code>。<br>e. a标签<br>a标签一般用于定义超链接，格式：<code>&lt;a&gt; &lt;/a&gt;</code><br>f. img标签<br>img标签一般用于表示所使用的的图片的连接，格式:<code>&lt;img src = &#39;  &#39;&gt;</code><br>g. table标签<br>table标签一般用于表示输入的表格，格式： <code>&lt;table&gt; &lt;/table&gt;</code>。一般情况下，table标签定义在表格外围，tr用于在表格内定义属性。    </p>
<p>1.3 树形结构<br>html文本是有格式的。以上面的例子来看， 最外面整体上的结构是html,下面又包含了head和body两部分。其中，head又包含了meta,title等4个内容。将上述结构画成树状图，如下：<br><img src="/images/spider5.jpg" srcset="/img/loading.gif" alt="" title="tree of html"><br>树形结构将会有助于我们遍历这个html文件。    </p>
<h2 id="Part-2：http协议"><a href="#Part-2：http协议" class="headerlink" title="Part 2：http协议"></a>Part 2：http协议</h2><p>http协议主要是讲我们如何访问网页的。<br>2.1 网络申请的响应过程<br>a. 浏览器通过DNS找到url对应的服务器，查找域名对应的ip地址；<br>b. 向目标地址的ip发送请求；<br>c. web服务器响应请求，返回html页面；<br>d. 浏览器解析html页面，并在显示端显示出来。    </p>
<p>2.2 url的分解(发了什么）<br>url的格式为：<br>scheme://host:port/path/?query-string = xxx # anchor<br>其中，scheme表示访问的协议，一般为http,https,ftp等；<br>host表示主机口，域名，例www.baidu.com；<br>port表示端口号，当访问一个服务器的时候，端口号默认为80；<br>path表示查找路径，指的是资源在服务器上的位置；<br>query-string表示要查询的字符串；<br>anchor表示锚点，也就是当前模块在页面上的第几部分。    </p>
<p>2.3 常用的请求方法（怎么发送的请求）<br>常用的请求方法有以下8种：<br><img src="/images/spider6.PNG" srcset="/img/loading.gif" alt="" title="tree of html"><br>其中，比较常用的有两种：post和get。   </p>
<p>2.4 请求头（发送过去，服务器怎么识别）<br>为了使得服务器知道这个页面请求是谁发来的，http协议会给请求加上请求头。常用的请求头参数如下：<br>a. User-Agent:浏览器名称；<br>b. Referer：表名当前这个请求是从哪个url过来的；<br>c. Cookie:用于区分不同的访问者；    </p>
<p>2.5 常见的响应代码（服务器识别之后，怎么响应）<br>当资源访问申请被提交给服务器之后，服务器会返回一个响应代码，用于描述当前的状态。常用的响应代码如下：<br>200：正常访问；<br>301：永久重定向；<br>302：临时重定向；<br>400：请求的内容在服务器上找不到；<br>403：服务器拒绝访问；<br>500：服务器内部错误。    </p>
<p>2.6 Chrome抓包工具（这个过程的调试工具）<br>针对chrome浏览器，这里使用“右键-检查”来获取当前页面的调试工具。<br>elements表示这个页面上显示的内容，当选中某一块的时候，会在页面上高亮提示，非常方便地帮助我们快速选择代码模块；<br>sources表示当前页面下内容的存储路径；<br>network通过抓取刷新页面时，不同资源的类型，大小，名字，状态等信息，能让我们对抓取与报错有非常直观的认识。   </p>
<h2 id="Part-3：爬虫的基本知识"><a href="#Part-3：爬虫的基本知识" class="headerlink" title="Part 3：爬虫的基本知识"></a>Part 3：爬虫的基本知识</h2><p>网络爬虫（又称为网页蜘蛛，网络机器人，在FOAF社区中间，更经常的称为网页追逐者），是一种按照一定的规则，自动地抓取万维网信息的程序或者脚本。 </p>
<p>网络爬虫的作用：<br>a. 抓取网页；<br>b. 数据存储；<br>c. 预处理；<br>d. 排名，提供检索服务等；   </p>
<p>网络爬虫的分类：<br>a. 按照目标来分：聚焦爬虫和通用网络爬虫；<br>聚焦爬虫是一个自动下载网页的程序，它根据既定的抓取目标，有选择的访问万维网上的网页与相关的链接，获取所需要的信息； 通用爬虫的目标性则不强，能够访问页面上的所有信息；<br>b. 按照规模来分：<br>小规模爬虫：主要爬取网页，速度不快；<br>中规模爬虫：爬取网站或者系列网站，对于速度有要求；<br>大规模爬虫：爬取全站，建立搜索引擎。    </p>
<p>网络爬虫的目标：在质量上，模拟用户通过浏览器对网页信息的获取；在速度上，越快越好。    </p>
<p>网络爬虫的风险：服务器上的数据有产权归属，若将网络爬虫爬取的数据用于牟利，可能存在法律风险。<br>如何避免呢？要遵循robots协议。</p>
<p>Robots协议是用来告诉爬虫哪些资源可以爬，哪些资源不可以爬。以京东的robots为例：</p>
<pre><code class="lang-https://www.jd.com/robots.txt```:">```
User-agent: *                   # 表示所有人都可以爬
Disallow: /?*                   # 但是不允许访问根节点中以？开头的路径
Disallow: /pop/*.html           # 不允许访问/pop/下面的html内容
Disallow: /pinpai/*.html?*      # 不允许访问/pinpai/下的html扩展内容
User-agent: EtaoSpider          # 这个和下面四个是恶意爬虫
Disallow: / 
User-agent: HuihuiSpider 
Disallow: / 
User-agent: GwdangSpider 
Disallow: / 
User-agent: WochachaSpider 
Disallow: /
</code></pre>

            <hr>
          </div>
          <br>
          <div>
            <p>
            
            
            </p>
            
              <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="nofollow noopener noopener">CC BY-SA 3.0协议</a> 。转载请注明出处！</p>
            
          </div>
        </div>
      </div>
    </div>
    <div class="d-none d-lg-block col-lg-2 toc-container">
      
  <div id="toc">
    <p class="h4"><i class="far fa-list-alt"></i>&nbsp;目录</p>
    <div id="tocbot"></div>
  </div>

    </div>
  </div>
</div>

<!-- custom -->


<!-- Comments -->
<div class="col-lg-7 mx-auto nopadding-md">
  <div class="container comments mx-auto" id="comments">
    
      <br><br>
      
      
  <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    <script>
      var disqus_config = function () {
        this.page.url = 'http://yoursite.com/2020/02/25/网络爬虫1/';
        this.page.identifier = '/2020/02/25/网络爬虫1/';
      };
      var oldLoad = window.onload;
      window.onload = function () {
        var d = document, s = d.createElement('script');
        s.type = 'text/javascript';
        s.src = '//' + 'Fluid-dev' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      };
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" target="_blank" rel="nofollow noopener noopener">comments
        powered by Disqus.</a></noscript>
  </div>


    
  </div>
</div>

    
  </main>

  
    <a class="z-depth-1" id="scroll-top-button" href="#" role="button">
      <i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  <footer class="mt-5">
  <div class="text-center py-3">
    <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><b>Hexo</b></a>
    <i class="iconfont icon-love"></i>
    <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"> <b>Fluid</b></a>
    <br>

    
  
    <!-- 不蒜子统计PV -->
    
    &nbsp;<span id="busuanzi_container_site_pv">总访问量 
          <span id="busuanzi_value_site_pv"></span> 次</span>&nbsp;
  
  
    <!-- 不蒜子统计UV -->
    
    &nbsp;<span id="busuanzi_container_site_uv">总访客数 
            <span id="busuanzi_value_site_uv"></span> 人</span>&nbsp;
  
  <br>



    


    <!-- cnzz Analytics icon -->
    

  </div>
</footer>

<!-- SCRIPTS -->
<script src="/lib/jquery/jquery.min.js" ></script>
<script src="/lib/popper/popper.min.js" ></script>
<script src="/lib/bootstrap/js/bootstrap.min.js" ></script>
<script src="/lib/mdbootstrap/js/mdb.min.js" ></script>
<script src="/js/main.js" ></script>


  <script src="/js/lazyload.js" ></script>



  
    <script src="/lib/tocbot/tocbot.min.js" ></script>
  
  <script src="/js/post.js" ></script>



  <script src="/lib/smooth-scroll/smooth-scroll.min.js" ></script>



  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>


<!-- Plugins -->


  

  

  

  

  <!-- cnzz Analytics -->
  



  <script src="/lib/prettify/prettify.min.js" ></script>
  <script>
    $(document).ready(function () {
      $('pre').addClass('prettyprint  linenums');
      prettyPrint();
    })
  </script>



  <script src="/lib/typed/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "网络爬虫1&nbsp;",
      ],
      cursorChar: "守拙",
      typeSpeed: 70,
      loop: ture,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>





  <script src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>



  <script src="/lib/fancybox/jquery.fancybox.min.js" ></script>
  <script>
    $("#post img:not(.no-zoom img, img[no-zoom])").each(
      function () {
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "images");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      }
    );
  </script>



  

  
    <!-- MathJax -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
          tex2jax: {
              inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
              processEscapes: true,
              skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
          }
      });

      MathJax.Hub.Queue(function() {
          var all = MathJax.Hub.getAllJax(), i;
          for(i=0; i < all.length; i += 1) {
              all[i].SourceElement().parentNode.className += ' has-jax';
          }
      });

    </script>

    <script src="https://cdn.staticfile.org/mathjax/2.7.6/MathJax.js?config=TeX-MML-AM_CHTML" ></script>

  









</body>
</html>
